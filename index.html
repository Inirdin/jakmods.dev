<!DOCTYPE html>
<html>
  <head>
    <meta name="description" content="Play mods for the Jak video game series through the unofficial OpenGOAL mod launcher - download available here!">
  </head>
  <style>
    .navbar {
      overflow: hidden;
      background-color: #fff;
      position: fixed;
      top: 0;
      width: 100%;
    }

    .main {
      margin-top: 150px;
      margin-left: auto;
      margin-right: auto;
      width: 80%;
    }

    table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
        padding: 5px;
    }

    /* offsets anchor tags relative to fixed navbar */
    :target {
      display: block;    
      position: relative;     
      top: -150px;
      visibility: hidden;
    }

  </style>
  <script>  // this will dynamically download list of mods and generate the table
  async function asyncLoadModTable() {
    // download and parse JSON
    let response = await fetch("https://raw.githubusercontent.com/OpenGOAL-Unofficial-Mods/OpenGoal-ModLauncher-dev/main/resources/jak1_mods.json");
    let data = await response.json();
    
    // let rawData = '{"Modding Community": [{"name": "Randomizer","desc": "Warp to a random checkpoint on various triggers (cells, flies, orbs, eco, death).","URL": "https://github.com/OpenGOAL-Unofficial-Mods/opengoal-randomizer-mod-pack/tree/main"}]}';
    // let data = JSON.parse(rawData);
    
    // add blank table
    let table = document.createElement("table");
    table.style.border="1px solid black";
    table.style.rules="all";
    document.getElementById("modList").appendChild(table);
    
    // parse mods into dict from JSON
    let mods = [];
    for (let mod_id in data) {
      let mod = data[mod_id];
      
      mods.push([
        mod["name"],
        mod["desc"],
        mod["contributors"].join(", "),
        mod["tags"].sort().join(", "),
        mod["release_date"],
        mod["website_url"], 
        mod["videos_url"]//,
        // mod["photos_url"]
      ]);
    }
    
    // sort by release date desc (recent at top)
    mods = mods.sort((a, b) => b[4].localeCompare(a[4]))
    
    let row = table.insertRow();
    row.insertCell().innerHTML = "<b>Mod Name</b>";
    row.insertCell().innerHTML = "<b>Description</b>";
    row.insertCell().innerHTML = "<b>Contributors</b>";
    row.insertCell().innerHTML = "<b>Tags</b>";
    row.insertCell().innerHTML = "<b>Release Date</b>";
    row.insertCell().innerHTML = "<b>Website</b>";
    row.insertCell().innerHTML = "<b>Video(s)</b>";
    // row.insertCell().innerHTML = "<b>Photos(s)</b>";
    
    for (let modIdx in mods) {
      mod = mods[modIdx];
      row = table.insertRow(); 
      row.insertCell().innerHTML = mod[0];  // name
      row.insertCell().innerHTML = mod[1];  // desc
      row.insertCell().innerHTML = mod[2];  // contributors
      row.insertCell().innerHTML = mod[3];  // tags
      row.insertCell().innerHTML = mod[4];  // release date
      if (mod[5] && mod[5] != "") {
        row.insertCell().innerHTML = "<a href=\"" + mod[5] + "\">Website</a>";  // website
      } else {
        row.insertCell().innerHTML = "N/A";
      }
      if (mod[6] && mod[6] != "") {
        row.insertCell().innerHTML = "<a href=\"" + mod[6] + "\">Video(s)</a>";  // videos
      } else {
        row.insertCell().innerHTML = "N/A";
      }
      // if (mod[7] && mod[7] != "") {
      //   row.insertCell().innerHTML = "<a href=\"" + mod[7] + "\">Photo(s)</a>";  // photos
      // } else {
      //   row.insertCell().innerHTML = "N/A";
      // }
    }
  }
    
  window.addEventListener("load", () => {
    asyncLoadModTable();
  });
  </script>
  <title>Jak Mods (OpenGOAL mod launcher)</title>
  <link rel="icon" href="icon.png" type="image/x-icon">
  <body>
    <div class="navbar">
      <p><h1><center>JakMods.dev (OpenGOAL Mod Launcher)</center></h1></p>
      <p><center><a href="/#download">Download/Installation</a> | <!--<a href="#textures">Texture Replacements</a> | --><a href="/#mods">Available Mods</a> | <a href="faq">FAQ</a> | <a href="https://opengoal.dev/docs/category/modding-examples">Modding Documentation</a> | <a href="https://opengoal.dev/">OpenGOAL official site</a></center></p>
      <hr>
    </div>
    
    <div class="main">
      <p><a name="download"/><h2>Download/Installation</h2></p>
      <p><h3>Click <a href="download.html">here</a> to download the unofficial OpenGOAL mod launcher and play OpenGOAL mods! The launcher will automatically update itself when needed.</h3></p>
      <p><b>PLEASE NOTE</b>: This launcher and the mods are NOT supported by the main OpenGOAL developers! If you have any issues or questions contact <u>barg034</u> or <u>zedb0t</u> on Discord.</p>
      <p>All code is ran at your own risk. The mod launcher is a small Python program bundled into a Windows app for easy use. You can audit the code, or build the launcher from source on Github <a href="https://github.com/OpenGOAL-Unofficial-Mods/OpenGoal-ModLauncher-dev">here</a>.</p>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/JYVNwv4_0R4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      <p></p>
      <hr>
      
      <!-- <p><a name="textures"/><h2>Texture Replacements</h2></p>
      <p>Similar to <a href="https://opengoal.dev/docs/usage/texture_replacement">texture replacements on vanilla openGOAL</a>, you can use custom textures on top of any mod:
        <ol>
          <li>Select an installed mod in the launcher</li>
          <li>Click the "View Folder" button to open the mod install folder</li>
          <li>Copy your <code>texture_replacements</code> folder and paste it inside of the <code>data</code> folder (this will overwrite any texture replacements from the mod itself)</li>
          <li>Click the "Reinstall" button to reinstall the mod with your updated textures</li>
        </ol>
      </p>
      <hr> -->

      <p><a name="mods"/><h2>Available Mods</h2></p>
      <p>Please ping <u>barg034</u> or <u>zedb0t</u> on Discord if you have a mod you'd like to add to the launcher.</p>
      <p><div id="modList"></div></p>
      <p>In addition to the above mods, here are some helpful utilities:
        <ul>
          <li><b>Jak Tracker</b> - Customizable UI that automatically tracks collected cells (inspired by OOT Randomizer trackers). <a href="https://github.com/OpenGOAL-Unofficial-Mods/jak-tracker/releases/download/0.1/JakTracker.zip">Download</a> / <a href="https://github.com/OpenGOAL-Unofficial-Mods/jak-tracker/blob/main/README.md">Instructions</a></li>
          </ul>
      </p>
    </div>
  </body>
</html>


